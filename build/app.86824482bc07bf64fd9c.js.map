{"version":3,"sources":["webpack:///./config/index.ts","webpack:///./components/Button/assets/playbtn.png","webpack:///./components/Button/assets/playbtn_inactive.png","webpack:///./components/Button/index.ts","webpack:///./components/Reel/assets/reel_cells.png","webpack:///./components/Reel/index.ts","webpack:///./components/Reels/index.ts","webpack:///./components/FPSDisplay/index.ts","webpack:///./index.ts"],"names":["gameWidth","gameHeight","reelsPosition","x","y","buttonPosition","FPSDisplayPosition","totalReels","reelSpinningCycles","reelSpinningSpeedFactor","totalReelCells","reelVisibleCells","reelCellHeight","reelCellWidth","reelVerticalPadding","reelHorizontalMargin","useEasyMode","config","position","set","btnActiveTexture","from","btnInactiveTexture","btn","buttonMode","interactive","addChild","setActive","active","this","texture","onClick","fn","on","load","loader","add","reelIndex","ticker","initialTilePosition","reelHeight","appTicker","spinningOutcome","cellHeight","horizontalMargin","spinningCycles","totalCells","verticalPadding","spinningCyclesMeter","setTilePositionAt","setPosition","width","cellNumber","tilePosition","Math","ceil","resetSpinningMeter","setSpinningOutcome","outcome","getSpinningOutcome","spin","spinningSpeedFactor","cb","animation","remove","items","spinning","index","reel","push","spinningReelsNumber","onStop","checkResults","i","length","areSpinning","getNumberBetween","min","max","floor","random","useOutcome","reelSpinningOutcome","undefined","find","alert","textStyle","fontSize","fill","content","setInterval","fps","FPS","toFixed","text","Date","now","window","onload","onComplete","app","backgroundColor","height","renderer","resize","innerWidth","innerHeight","stage","scale","addEventListener","createApplication","button","reels","fpsDisplay","instance","document","body","appendChild","view","render","shared","once"],"mappings":"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","file":"app.86824482bc07bf64fd9c.js","sourcesContent":["import { ConfigInterface } from './contract';\n\nexport const config: ConfigInterface = {\n  gameWidth: 800,\n  gameHeight: 600,\n  reelsPosition: { x: 120, y: 60 },\n  buttonPosition: { x: 300, y: 440 },\n  FPSDisplayPosition: { x: 220, y: 560 },\n  totalReels: 5,\n  reelSpinningCycles: 2,\n  reelSpinningSpeedFactor: [5, 10, 15, 20, 30],\n  totalReelCells: 7,\n  reelVisibleCells: 3,\n  reelCellHeight: 100,\n  reelCellWidth: 102,\n  reelVerticalPadding: 25,\n  reelHorizontalMargin: 15,\n  useEasyMode: true\n};\n","export default __webpack_public_path__ + \"assets/4b47a44dfec58e388f81716668f6b7f3.png\";","export default __webpack_public_path__ + \"assets/584548321fda602a2ac4f0965b5ab415.png\";","import * as PIXI from 'pixi.js';\n\nimport btnActiveImg from './assets/playbtn.png';\nimport btnInactiveImg from './assets/playbtn_inactive.png';\nimport { ConfigInterface } from '../../config/contract';\n\nclass Button extends PIXI.Container {\n  protected btnActiveTexture: PIXI.Texture;\n  protected btnInactiveTexture: PIXI.Texture;\n  protected btn: PIXI.Sprite;\n\n  constructor(config: ConfigInterface) {\n    super();\n    this.position.set(config.buttonPosition.x, config.buttonPosition.y);\n    this.btnActiveTexture = PIXI.Texture.from('btnActiveImg');\n    this.btnInactiveTexture = PIXI.Texture.from('btnInactiveImg');\n    this.btn = new PIXI.Sprite(this.btnActiveTexture);\n    this.btn.buttonMode = true;\n    this.btn.interactive = true;\n    this.addChild(this.btn);\n  }\n\n  setActive(active: boolean) {\n    this.btn.texture = active ? this.btnActiveTexture : this.btnInactiveTexture;\n  }\n\n  onClick(fn: (instance: Button) => void) {\n    this.btn.on('click', () => fn(this));\n  }\n\n  static load(loader: PIXI.Loader) {\n    loader.add('btnActiveImg', btnActiveImg);\n    loader.add('btnInactiveImg', btnInactiveImg);\n  }\n}\n\nexport default Button;\n","export default __webpack_public_path__ + \"assets/582cb73eb42daf0a295da68c5156de1d.png\";","import * as PIXI from 'pixi.js';\nimport reelCellsImg from './assets/reel_cells.png';\nimport { ConfigInterface } from '../../config/contract';\n\nclass Reel extends PIXI.TilingSprite {\n  protected spinningOutcome: number;\n\n  protected spinningCycles: number;\n\n  protected spinningCyclesMeter: number;\n\n  protected reelIndex: number;\n\n  protected horizontalMargin: number;\n\n  protected verticalPadding: number;\n\n  protected cellHeight: number;\n\n  protected totalCells: number;\n\n  protected appTicker: PIXI.Ticker;\n\n  constructor(reelIndex: number, config: ConfigInterface, ticker: PIXI.Ticker, initialTilePosition: number = 0) {\n    const texture = PIXI.Texture.from('reelCellsImg');\n    const {\n      reelCellHeight,\n      reelVisibleCells,\n      reelVerticalPadding,\n      reelCellWidth,\n      reelHorizontalMargin,\n      reelSpinningCycles,\n      totalReelCells\n    } = config;\n    const reelHeight = reelCellHeight * reelVisibleCells + reelVerticalPadding;\n    super(texture, reelCellWidth, reelHeight);\n    this.appTicker = ticker;\n    this.spinningOutcome = 0;\n    this.cellHeight = reelCellHeight;\n    this.horizontalMargin = reelHorizontalMargin;\n    this.spinningCycles = reelSpinningCycles;\n    this.totalCells = totalReelCells;\n    this.verticalPadding = reelVerticalPadding;\n    this.reelIndex = reelIndex;\n    this.spinningCyclesMeter = 0;\n    this.setTilePositionAt(initialTilePosition);\n    this.setPosition();\n  }\n\n  protected setPosition() {\n    this.x = this.reelIndex * (this.width + this.horizontalMargin);\n    this.y = 0;\n  }\n\n  protected setTilePositionAt(cellNumber: number) {\n    this.tilePosition.x = 0;\n    this.tilePosition.y = -cellNumber * this.cellHeight + Math.ceil(this.verticalPadding / 2);\n  }\n\n  protected resetSpinningMeter() {\n    this.spinningCyclesMeter = this.spinningCycles * this.cellHeight * this.totalCells;\n  }\n\n  protected setSpinningOutcome(outcome: number) {\n    this.spinningOutcome = outcome;\n    this.setTilePositionAt(outcome);\n    this.resetSpinningMeter();\n  }\n\n  getSpinningOutcome() {\n    return this.spinningOutcome;\n  }\n\n  spin(outcome: number, spinningSpeedFactor: number, cb: Function) {\n    this.setSpinningOutcome(outcome);\n    const animation = () => {\n      if (this.spinningCyclesMeter > 0) {\n        this.tilePosition.y += spinningSpeedFactor;\n        this.spinningCyclesMeter -= spinningSpeedFactor;\n      } else if (this.spinningCyclesMeter <= 0) {\n        if (this.spinningCyclesMeter < 0) {\n          this.tilePosition.y += this.spinningCyclesMeter;\n          this.spinningCyclesMeter = 0;\n        }\n        this.appTicker.remove(animation);\n        cb();\n      }\n    };\n    this.appTicker.add(animation);\n  }\n\n  static load(loader: PIXI.Loader) {\n    loader.add('reelCellsImg', reelCellsImg);\n  }\n}\n\nexport default Reel;\n","import * as PIXI from 'pixi.js';\nimport Reel from '../Reel';\nimport { ConfigInterface } from '../../config/contract';\n\nclass Reels extends PIXI.Container {\n  protected items: Reel[] = [];\n\n  protected totalReels: number;\n\n  protected totalReelCells: number;\n\n  protected spinningSpeedFactor: number[];\n\n  protected useEasyMode: boolean;\n\n  protected spinning = false;\n\n  constructor(config: ConfigInterface, ticker: PIXI.Ticker) {\n    super();\n    this.totalReels = config.totalReels;\n    this.useEasyMode = config.useEasyMode;\n    this.spinningSpeedFactor = config.reelSpinningSpeedFactor;\n    this.totalReelCells = config.totalReelCells;\n    this.position.set(config.reelsPosition.x, config.reelsPosition.y);\n    for (let index = 0; index < this.totalReels; index = index + 1) {\n      const reel = new Reel(index, config, ticker);\n      this.items.push(reel);\n      this.addChild(reel);\n    }\n  }\n\n  spin(cb: Function) {\n    this.spinning = true;\n    const spinningOutcome = this.getSpinningOutcome();\n    let spinningReelsNumber = this.totalReels;\n    const onStop = () => {\n      spinningReelsNumber -= 1;\n      if (!spinningReelsNumber) {\n        cb();\n        this.spinning = false;\n        this.checkResults();\n      }\n    };\n    for (let i = 0; i < this.items.length; i++) {\n      this.items[i].spin(spinningOutcome[i], this.spinningSpeedFactor[i], onStop);\n    }\n  }\n\n  areSpinning() {\n    return this.spinning;\n  }\n\n  protected getSpinningOutcome(): number[] {\n    const outcome = [];\n    const getNumberBetween = (min: number, max: number): number => Math.floor(Math.random() * (max - min + 1)) + min;\n    let useOutcome = null;\n    if (this.useEasyMode) {\n      const chance = getNumberBetween(0, 10);\n      if (chance < 5) {\n        useOutcome = getNumberBetween(0, this.totalReelCells - 1);\n      }\n    }\n    for (let i = 0; i < this.totalReels; i += 1) {\n      const reelSpinningOutcome = useOutcome || getNumberBetween(0, this.totalReelCells - 1);\n      outcome.push(reelSpinningOutcome);\n    }\n    return outcome;\n  }\n\n  protected checkResults(): void {\n    const position = this.items[0].getSpinningOutcome();\n    const win = this.items.find((i) => i.getSpinningOutcome() !== position) === undefined;\n    if (win) alert('You won!');\n  }\n\n  static load(loader: PIXI.Loader) {\n    Reel.load(loader);\n  }\n}\n\nexport default Reels;\n","import * as PIXI from 'pixi.js';\nimport { ConfigInterface } from '../../config/contract';\n\nclass FPSDisplay extends PIXI.Container {\n  protected textStyle: Partial<PIXI.TextStyle> = {\n    fontSize: 20,\n    fill: 0xff0000\n  };\n\n  constructor(config: ConfigInterface, ticker: PIXI.Ticker) {\n    super();\n    this.position.set(config.FPSDisplayPosition.x, config.FPSDisplayPosition.y);\n    const content = new PIXI.Text('', this.textStyle);\n    this.addChild(content);\n\n    setInterval(() => {\n      const fps = ticker.FPS.toFixed(2);\n      content.text = `Timestamp: ${Date.now()}, FPS: ${fps}`;\n    }, 1000);\n  }\n}\n\nexport default FPSDisplay;\n","/**\n * Just for simplicity and demonstration purposes, no specific JavaScript framework or state management library has\n * been used.\n */\n\nimport * as PIXI from 'pixi.js';\nimport { config } from './config';\nimport Button from './components/Button';\nimport Reels from './components/Reels';\nimport FPSDisplay from './components/FPSDisplay';\n\nimport './style.css';\n\nconst { gameWidth, gameHeight } = config;\n\nfunction createApplication(): PIXI.Application {\n  const app = new PIXI.Application({\n    backgroundColor: 0xd3d3d3,\n    width: gameWidth,\n    height: gameHeight\n  });\n  app.renderer.resize(window.innerWidth, window.innerHeight);\n  app.stage.scale.x = window.innerWidth / gameWidth;\n  app.stage.scale.y = window.innerHeight / gameHeight;\n  window.addEventListener('resize', () => {\n    app.renderer.resize(window.innerWidth, window.innerHeight);\n    app.stage.scale.x = window.innerWidth / gameWidth;\n    app.stage.scale.y = window.innerHeight / gameHeight;\n  });\n  return app;\n}\n\nfunction loadAssets(onComplete: () => void): void {\n  const loader = PIXI.Loader.shared;\n  Button.load(loader);\n  Reels.load(loader);\n  loader.onComplete.once(onComplete);\n  loader.load();\n}\n\nfunction render(app: PIXI.Application) {\n  document.body.appendChild(app.view);\n}\n\nwindow.onload = () =>\n  loadAssets(() => {\n    const app = createApplication();\n    const stage = app.stage;\n\n    const button = new Button(config);\n    stage.addChild(button);\n\n    const reels = new Reels(config, app.ticker);\n    stage.addChild(reels);\n\n    const fpsDisplay = new FPSDisplay(config, app.ticker);\n    stage.addChild(fpsDisplay);\n\n    button.onClick((instance) => {\n      if (!reels.areSpinning()) {\n        instance.setActive(false);\n        reels.spin(() => {\n          instance.setActive(true);\n        });\n      }\n    });\n\n    render(app);\n  });\n"],"sourceRoot":""}